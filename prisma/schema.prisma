datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Subscription {
  id               String   @id @default(cuid())
  userId           String   @unique
  plan             String   // "free" | "pro" | "team"
  status           String   // "active" | "inactive"
  stripeCustomerId String?
  stripeSubId      String?
  currentPeriodEnd DateTime?
  updatedAt        DateTime @updatedAt
}

model UsageMonth {
  id        String   @id @default(cuid())
  userId    String
  yearMonth String   // "2026-01"
  drafts    Int      @default(0)
  sends     Int      @default(0)
  updatedAt DateTime @updatedAt
  createdAt DateTime @default(now())

  @@unique([userId, yearMonth])
  @@index([userId, yearMonth])
}

model Plan {
  id        String   @id @default(cuid())
  userId    String   @unique
  tier      String   @default("free") // free, pro, etc
  draftLimit Int     @default(50)
  sendLimit  Int     @default(10)
  updatedAt DateTime @updatedAt
  createdAt DateTime @default(now())
}
